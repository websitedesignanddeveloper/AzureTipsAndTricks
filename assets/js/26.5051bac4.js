(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{334:function(s,t,e){"use strict";e.r(t);var n=e(43),a=Object(n.a)({},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("ðŸ’¡ Learn more : "),e("a",{attrs:{href:"https://docs.microsoft.com/azure/key-vault/about-keys-secrets-and-certificates?WT.mc_id=docs-azuredevtips-micrum",target:"_blank",rel:"noopener noreferrer"}},[s._v("Keys, secrets, and certificates"),e("OutboundLink")],1),s._v(".")])]),s._v(" "),e("h4",{attrs:{id:"remove-passwords-committed-to-github-on-accident"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remove-passwords-committed-to-github-on-accident","aria-hidden":"true"}},[s._v("#")]),s._v(" Remove passwords committed to GitHub on accident")]),s._v(" "),e("p",[s._v("Writing code day after day means secrets, connection strings and more get added to your code accidentally. And if you are like me, they get committed to your GitHub repo and then you have to live in shame. ðŸ˜ƒ In this post, I'll walk you through removing secrets from a GitHub repo that you've already committed the secret to.")]),s._v(" "),e("p",[s._v("Part 1 - Initial setup:")]),s._v(" "),e("p",[s._v("Scenario: You have committed a password with the value of "),e("code",[s._v("qph@}uC,7cGLBdsX")]),s._v(" to your GitHub repo. This password should be confidential and not stored in the code.")]),s._v(" "),e("p",[s._v("How do you fix it?")]),s._v(" "),e("ul",[e("li",[s._v("Ensure you have the repo on your local disk or clone a fresh copy with HTTPS or SSH. I'll use SSH "),e("code",[s._v("git clone git@github.com:mbcrump/crumpbot.git")]),s._v(" as a sample.")]),s._v(" "),e("li",[s._v("Clone a copy of your repo that has the secret stored using the mirror option, like the following "),e("code",[s._v("git clone --mirror git@github.com:mbcrump/crumpbot.git")]),s._v(".")]),s._v(" "),e("li",[s._v("You'll now have a BARE repo. CD into it with "),e("code",[s._v("cd crumpbot.git")]),s._v(" and run "),e("code",[s._v("ls -l")]),s._v(" to list out the contents on macOS or "),e("code",[s._v("dir")]),s._v(" on Windows.")])]),s._v(" "),e("p",[s._v("Below is an example of my repo.")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[mbcrump@Michaels-MBP-3]:[~/Documents/code]$ cd crumpbot.git\n[mbcrump@Michaels-MBP-3]:[~/Documents/code/crumpbot.git] (BARE:master)$ ls -l\ntotal 32\n-rw-r--r--   1 mbcrump  staff   23 Dec  1 19:47 HEAD\n-rw-r--r--   1 mbcrump  staff  211 Dec  1 19:47 config\n-rw-r--r--   1 mbcrump  staff   73 Dec  1 19:47 description\ndrwxr-xr-x  13 mbcrump  staff  416 Dec  1 19:47 hooks\ndrwxr-xr-x   3 mbcrump  staff   96 Dec  1 19:47 info\ndrwxr-xr-x  27 mbcrump  staff  864 Dec  1 19:48 objects\n-rw-r--r--   1 mbcrump  staff  105 Dec  1 19:47 packed-refs\ndrwxr-xr-x   4 mbcrump  staff  128 Dec  1 19:47 refs\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("p",[s._v("Part 2 - Create a file of passwords that you'd like to remove:")]),s._v(" "),e("ul",[e("li",[s._v("Create a "),e("code",[s._v("passwords.txt")]),s._v(" file and place and enter the passwords that you'd like to remove from your GitHub repo.")])]),s._v(" "),e("p",[s._v("I created mine on macOS with "),e("code",[s._v("touch passwords.txt")]),s._v(" or "),e("code",[s._v("echo some-text > passwords.txt")]),s._v(" on Windows and added the password that I accidentally committed:")]),s._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("qph@}uC,7cGLBdsX\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("Save the file.")])]),s._v(" "),e("p",[s._v("Part 3 - Install BFG:")]),s._v(" "),e("p",[s._v("Enter "),e("a",{attrs:{href:"https://rtyley.github.io/bfg-repo-cleaner/",target:"_blank",rel:"noopener noreferrer"}},[s._v("BFG"),e("OutboundLink")],1),s._v(". According to the author:")]),s._v(" "),e("blockquote",[e("p",[s._v("BFG is a simpler, faster alternative to git-filter-branch for cleansing bad data out of your Git repository history:\nRemoving Crazy Big Files\nRemoving Passwords, Credentials & other Private data")])]),s._v(" "),e("ul",[e("li",[s._v("Install "),e("a",{attrs:{href:"https://rtyley.github.io/bfg-repo-cleaner/",target:"_blank",rel:"noopener noreferrer"}},[s._v("BFG"),e("OutboundLink")],1),s._v(" with "),e("code",[s._v("brew install bfg")]),s._v(" assuming you have Homebrew installed and using a Mac or "),e("a",{attrs:{href:"https://rtyley.github.io/bfg-repo-cleaner/",target:"_blank",rel:"noopener noreferrer"}},[s._v("download"),e("OutboundLink")],1),s._v(" the JAR file if you are on Windows.")])]),s._v(" "),e("p",[s._v("Part 4 - Clean up the passwords previously committed:")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("Run "),e("code",[s._v("bfg --replace-text passwords.txt crumpbot.git")]),s._v(" on Mac or "),e("code",[s._v("java -jar bfg.jar --replace-text passwords.txt crumpbot.git")]),s._v(" if using the JAR file.")])]),s._v(" "),e("li",[e("p",[s._v("Below is output from that command:")])])]),s._v(" "),e("div",{staticClass:"language-shhell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[mbcrump@Michaels-MBP-3]:[~/Documents/code]$ bfg --replace-text passwords.txt crumpbot.git\n\nUsing repo : /Users/mbcrump/Documents/code/crumpbot.git\n\nFound 2489 objects to protect\nFound 2 commit-pointing refs : HEAD, refs/heads/master\n\nProtected commits\n-----------------\n\nThese are your protected commits, and so their contents will NOT be altered:\n\n * commit 58969937 (protected by 'HEAD')\n\nCleaning\n--------\n\nFound 11 commits\nCleaning commits:       100% (11/11)\nCleaning commits completed in 96 ms.\n\nUpdating 1 Ref\n--------------\n\n        Ref                 Before     After   \n        ---------------------------------------\n        refs/heads/master | 58969937 | 3f9041c9\n\nUpdating references:    100% (1/1)\n...Ref update completed in 24 ms.\n\nCommit Tree-Dirt History\n------------------------\n\n        Earliest      Latest\n        |                  |\n        D D D D DD D D m m m\n\n        D = dirty commits (file tree fixed)\n        m = modified commits (commit message or parents changed)\n        . = clean commits (no changes to file tree)\n\n                                Before     After   \n        -------------------------------------------\n        First modified commit | 39e68d03 | 95e6f9f4\n        Last dirty commit     | 2007b5c5 | 0f57a693\n\nChanged files\n-------------\n\n        Filename   Before & After                               \n        --------------------------------------------------------\n        bot.js   | 1b55a8d0 â‡’ 02758dd8, cba19782 â‡’ db95f8c2, ...\n\n\nIn total, 19 object ids were changed. Full details are logged here:\n\n        /Users/mbcrump/Documents/code/crumpbot.git.bfg-report/2019-12-01/19-48-22\n\nBFG run is complete! When ready, run: git reflog expire --expire=now --all && git gc --prune=now --aggressive\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br")])]),e("p",[s._v("Part 5 - Pushing to GitHub:")]),s._v(" "),e("ul",[e("li",[s._v("Run "),e("code",[s._v("git reflog expire --expire=now --all && git gc --prune=now --aggressive")]),s._v(" as indicated by the output.")]),s._v(" "),e("li",[s._v("Run "),e("code",[s._v("git push")]),s._v(" to push it to your repo.")])]),s._v(" "),e("p",[s._v("Part 6 - Wrap-up and verify your repo was updated successfully:")]),s._v(" "),e("p",[s._v("If you go back to your GitHub repo and look at prior commits, then you should see "),e("strong",[e("strong",[s._v("REMOVED")])]),s._v(" like the following:")]),s._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" tmi "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tmi.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" channel "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mbcrump"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" config "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    options"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        debug"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    connection"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        cluster"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aws"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n        reconnect"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    identity"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        username"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mbcrump"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"***REMOVED***"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    channels"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("channel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("I hope this helps someone out there and if you want to stay in touch then I can be found on "),e("a",{attrs:{href:"http://twitch.tv/mbcrump",target:"_blank",rel:"noopener noreferrer"}},[s._v("Twitch"),e("OutboundLink")],1),s._v(", "),e("a",{attrs:{href:"http://twitter.com/mbcrump",target:"_blank",rel:"noopener noreferrer"}},[s._v("Twitter"),e("OutboundLink")],1),s._v(" or "),e("a",{attrs:{href:"http://github.com/mbcrump",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub"),e("OutboundLink")],1),s._v(".")])])},[],!1,null,null,null);t.default=a.exports}}]);